(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64a8d0aa"],{"99d6":function(e,s,t){},b7bc:function(e,s,t){"use strict";t("99d6")},ca95:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"address"},[t("div",{staticClass:"header"},[t("van-nav-bar",{staticStyle:{"background-image":"linear-gradient(-20deg, #ddd6f3 0%, #faaca8 100%, #faaca8 100%)"},attrs:{title:"常用地址","left-text":"返回",fixed:"","left-arrow":""},on:{"click-left":e.onClickLeft}}),t("div",{staticStyle:{height:"40px"}})],1),e._l(e.addressData,(function(s){return t("van-cell",{key:s.id,attrs:{title:s.username+" "+s.telephone,label:s.province+s.city+s.area+s.address}},[t("van-icon",{staticStyle:{"margin-top":"20px"},attrs:{name:"edit",size:"22",color:"#1989fa"},on:{click:function(t){return e.editAddress(s)}}}),t("van-icon",{staticStyle:{"margin-top":"20px","margin-left":"10px"},attrs:{name:"delete-o",size:"22",color:"#1989fa"},on:{click:function(t){return e.deleteAddress(s.id)}}})],1)})),t("div",{staticStyle:{height:"120px"}}),t("div",{staticClass:"btn"},[t("van-button",{staticClass:"addBtn",attrs:{round:"",block:""},on:{click:e.addBtn}},[e._v("新增地址")])],1),t("van-action-sheet",{attrs:{title:e.addressTitle},model:{value:e.show,callback:function(s){e.show=s},expression:"show"}},[t("div",{staticClass:"content"},[t("van-form",{ref:"form",attrs:{model:e.addressForm}},[t("van-field",{attrs:{label:"姓名",placeholder:"请输入收货人姓名",rules:[{required:!0,message:"请输入收货人姓名"}]},model:{value:e.addressForm.username,callback:function(s){e.$set(e.addressForm,"username",s)},expression:"addressForm.username"}}),t("van-field",{attrs:{label:"电话",placeholder:"请输入收货人号码",rules:[{required:!0,message:"请输入正确手机号码"}]},model:{value:e.addressForm.telephone,callback:function(s){e.$set(e.addressForm,"telephone",s)},expression:"addressForm.telephone"}}),t("van-field",{attrs:{label:"地区选择",readonly:"",clickable:"",value:this.addressStr,placeholder:"请选择地区",rules:[{required:!0,message:"请输入地址"}]},on:{click:function(s){e.addressShow=!0}}}),t("van-field",{attrs:{label:"详细地址",placeholder:"请输入详细地址",rules:[{required:!0,message:"请输入详细地址"}]},model:{value:e.addressForm.address,callback:function(s){e.$set(e.addressForm,"address",s)},expression:"addressForm.address"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{staticClass:"addBtn",attrs:{round:"",block:""},on:{click:e.submitAddress}},[e._v("提交")])],1)],1)],1)]),t("van-popup",{style:{height:"45%"},attrs:{round:"",position:"bottom"},model:{value:e.addressShow,callback:function(s){e.addressShow=s},expression:"addressShow"}},[t("van-area",{ref:"myArea",attrs:{"area-list":e.areaList},on:{confirm:e.onConfirm,cancel:e.onCancel}})],1)],2)},r=[],d=t("1da1"),n=t("5530"),i=(t("a15b"),t("d81d"),t("4de4"),t("b0c0"),t("96cf"),t("dac6")),o=t("9163"),c=t("2f62"),l={data:function(){return{addressData:[],show:!1,addressTitle:"新增地址",areaList:o["areaList"],addressShow:!1,addressStr:"",addressForm:{province:"",city:"",area:"",address:"",username:"",telephone:"",id:"",userId:""}}},computed:Object(n["a"])({},Object(c["e"])("user",["userInfo"])),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])("user",["getUserInfo"])),{},{queryUser:function(){this.getUserInfo()},onClickLeft:function(){this.$router.go(-1)},getAllAddress:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var t,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t={page:1,pageSize:100,userId:e.userInfo.id},s.next=3,Object(i["a"])("/address/pageQuery",t);case 3:a=s.sent,e.addressData=a.data.data.list,console.log(a.data.data.list);case 6:case"end":return s.stop()}}),s)})))()},addBtn:function(){this.show=!0,this.addressForm={},this.addressStr="",this.addressTitle="新增地址"},deleteAddress:function(e){var s=this;this.$dialog.confirm({message:"您确定要删除该常用地址吗？"}).then(Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["a"])("/address/deleteById",{id:e});case 2:t.sent,s.getAllAddress();case 4:case"end":return t.stop()}}),t)})))).catch((function(){}))},onConfirm:function(e){this.addressStr=e.filter((function(e){return!!e})).map((function(e){return e.name})).join("-"),this.addressForm.province=e[0].name,this.addressForm.city=e[1].name,this.addressForm.area=e[2].name,this.addressShow=!1},onCancel:function(){this.addressShow=!1,this.$refs.myArea.reset()},editAddress:function(e){this.addressTitle="修改地址",this.show=!0,this.addressForm.id=e.id,this.addressForm.username=e.username,this.addressForm.telephone=e.telephone,this.addressForm.address=e.address,this.addressForm.province=e.province,this.addressForm.city=e.city,this.addressForm.area=e.area,this.addressStr=e.province+"-"+e.city+"-"+e.area},submitAddress:function(){var e=this;this.addressForm.userId=this.userInfo.id,this.$refs.form.validate().then(Object(d["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(i["b"])("/address/saveOrUpdate",e.addressForm);case 2:s.sent,e.getAllAddress(),e.show=!1,e.$toast.success("提交成功");case 6:case"end":return s.stop()}}),s)})))).catch((function(){e.$toast.fail("提交失败")}))}}),created:function(){this.getAllAddress(),this.queryUser()}},u=l,h=(t("b7bc"),t("2877")),m=Object(h["a"])(u,a,r,!1,null,"7ba6d914",null);s["default"]=m.exports}}]);
//# sourceMappingURL=chunk-64a8d0aa.2f02745b.js.map