(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-053ac48e"],{"02ee":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"detail"},[r("div",{staticClass:"header"},[r("div",{staticClass:"navbar"},[r("span",{staticStyle:{float:"left","padding-left":"20px","font-size":"14px"},on:{click:function(e){return t.$router.go(-1)}}},[r("van-icon",{attrs:{name:"arrow-left"}})],1),r("span",[t._v("订单详情")])])]),r("div",{staticClass:"orderDetail"},[t._l(t.orderLines,(function(e){return r("van-card",{key:e.productId,staticStyle:{"font-size":"14px","font-weight":"500"},attrs:{num:e.number,price:"￥"+e.price+".00",title:e.product.name,thumb:e.product.photo},scopedSlots:t._u([{key:"tags",fn:function(){return[r("van-tag",{staticStyle:{"margin-top":"5px"},attrs:{plain:"",type:"danger"}},[t._v(t._s(e.product.description))])]},proxy:!0}],null,!0)})})),r("div",{staticStyle:{float:"right","font-weight":"700px","margin-top":"20px","margin-right":"20px"}},[t._v(" 总价：￥"),r("span",{staticStyle:{color:"#ee0a24"}},[t._v(t._s(t.total))])])],2),r("van-divider",{staticStyle:{"margin-top":"20px"}}),r("div",{staticClass:" bottom"},[t.orderDetail.address?r("p",[t._v(" 服务地址："+t._s(t.orderDetail.address.city)+t._s(t.orderDetail.address.area)+t._s(t.orderDetail.address.address)+" ")]):t._e(),t.orderDetail.address?r("p",[t._v(" 联系方式："+t._s(t.orderDetail.address.username)+"("+t._s(t.orderDetail.address.telephone)+")")]):t._e(),r("p",[t._v("下单时间："+t._s(t._f("dateFormat")(t.orderDetail.orderTime)))]),t.orderDetail.serviceTime?r("p",[t._v("服务时间："+t._s(t._f("dateFormat")(t.orderDetail.serviceTime)))]):t._e()]),"待确认"==t.orderDetail.status&&0==t.comments.length?r("div",{staticClass:"confirmOrder"},[r("div",{staticClass:"confirmOrderBtn",on:{click:t.confirmOrder}},[t._v("确认完成")])]):t._e(),t.comments.length?r("div",{staticClass:"comment_list"},[r("div",[r("van-divider",[t._v("您的评论")])],1),t._l(t.comments,(function(e){return r("van-card",{key:e.id,scopedSlots:t._u([{key:"tags",fn:function(){return[r("div",{staticClass:"delete",on:{click:function(r){return t.deleteComment(e.id)}}},[t._v("x")]),r("van-image",{staticStyle:{float:"left","margin-top":"10px"},attrs:{round:"",width:"4rem",height:"4rem",src:t.orderDetail.customer.userFace}}),r("div",{staticStyle:{"margin-left":"70px","margin-top":"10px",padding:"0 0.5em"}},[r("div",{staticStyle:{"line-height":"2em"}},[r("strong",[t._v(t._s(t.orderDetail.customer.realname))])]),r("div",{staticStyle:{"line-height":"2em"}},[t._v(t._s(e.content))]),r("div",{staticStyle:{"line-height":"2em"}},[t._v(" 评论时间： "+t._s(t._f("fmtDate_global")(e.commentTime))+" ")])])]},proxy:!0}],null,!0)})}))],2):t._e(),r("div",{staticClass:"orderStep"},[r("van-divider",[t._v("订单进度")]),r("van-steps",{attrs:{active:t.activeStep}},[r("van-step",[t._v("买家下单")]),r("van-step",[t._v("待派单")]),r("van-step",[t._v("待接单")]),r("van-step",[t._v("待确认")]),r("van-step",[t._v("已完成")])],1)],1),r("div",{staticStyle:{height:"80px"}})],1)},i=[],n=r("1da1"),s=(r("96cf"),r("dac6")),o={data:function(){return{orderId:"",orderDetail:{},orderLines:[],total:0,comments:"",activeStep:0}},filters:{priceFilter:function(t){return 1}},methods:{confirmOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.orderDetail.id,e.next=3,Object(s["a"])("/order/confirmOrder",{orderId:r});case 3:a=e.sent,200==a.data.status&&t.$dialog.confirm({title:a.data.message,message:"是否现在去评论？"}).then((function(){t.$router.push({path:"/manager/comment",query:{orderId:t.orderDetail.id,customerId:t.orderDetail.customerId}})})).catch((function(){t.$router.push({path:"/manager/order"})}));case 5:case"end":return e.stop()}}),e)})))()},getOrderDetail:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["a"])("/order/findById",{id:t});case 2:a=r.sent,e.orderDetail=a.data.data,e.orderLines=a.data.data.orderLines,e.total=a.data.data.total,e.comments=a.data.data.comments;case 7:case"end":return r.stop()}}),r)})))()},deleteComment:function(t){var e=this;this.$dialog.confirm({title:"是否删除评论？"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["a"])("/orderComment/deleteById",{id:t});case 2:r.sent,e.$toast.success("删除成功!"),e.getOrderDetail(e.orderId);case 5:case"end":return r.stop()}}),r)})))).catch((function(){}))},stepDetail:function(){"待派单"==this.orderDetail.status?this.activeStep=1:"待接单"==this.orderDetail.status?this.activeStep=2:"待确认"==this.orderDetail.status?this.activeStep=3:"已完成"==this.orderDetail.status&&(this.activeStep=4)}},created:function(){var t=this;this.orderId=this.$route.query.id,this.getOrderDetail(this.orderId).then((function(e){t.stepDetail()}))}},d=o,c=(r("5c26"),r("2877")),l=Object(c["a"])(d,a,i,!1,null,null,null);e["default"]=l.exports},"5c26":function(t,e,r){"use strict";r("ca72")},ca72:function(t,e,r){}}]);
//# sourceMappingURL=chunk-053ac48e.35f90506.js.map